<?php

namespace {{namespace}}\Models;

use {{namespace}}\Traits\DraftableTrait;
use Illuminate\Database\Eloquent\Model;
use GeneaLabs\LaravelModelCaching\Traits\Cachable;

abstract class BaseModel extends Model {

   //  use Cachable;
   use DraftableTrait;

    /**
     * Get the lasts items ordered by id DESC
     * @param $query
     * @param int $limit
     * @return
     */
    public function scopeLast($query, int $limit = null)
    {
        if (is_null($limit)) {
            return $query->orderByDesc('id');
        }
        return $query->limit($limit)->orderByDesc('id');
    }


    public function scopeFindBySlug($query, string $slug)
    {
        return $query->where('slug',$slug);
    }
}
